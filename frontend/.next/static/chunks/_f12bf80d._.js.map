{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tranh/OneDrive%20-%20Seneca/Documents/VSCODE/project/Streaming_Platform/frontend/lib/axiosInstance.tsx"],"sourcesContent":["// lib/axiosInstance.ts\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"http://localhost:5001/api\";\r\n\r\nexport const axiosInstance = axios.create({\r\n  baseURL: BASE_URL,  // Đây là URL của backend của bạn\r\n  withCredentials: true,  // Cho phép gửi cookies (cần thiết cho authentication)\r\n});"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;;;;;AAGvB,MAAM,WAAW;AAEV,MAAM,gBAAgB,MAAM,MAAM,CAAC;IACxC,SAAS;IACT,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tranh/OneDrive%20-%20Seneca/Documents/VSCODE/project/Streaming_Platform/frontend/components/AuthGuard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { axiosInstance } from \"@/lib/axiosInstance\";\r\nimport { useEffect, ReactNode } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface AuthGuardProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport default function AuthGuard({ children }: AuthGuardProps) {\r\n    const router = useRouter();\r\n\r\n    const { data: authData, isLoading, error } = useQuery({\r\n        queryKey: [\"authUser\"],\r\n        queryFn: async () => {\r\n            const res = await axiosInstance.get(\"/auth/me\");\r\n            return res.data;\r\n        },\r\n        retry: false,\r\n    });\r\n\r\n    const authUser = authData?.user;\r\n    const isAuthenticated = Boolean(authUser);\r\n    const isOnboarded = authUser?.isOnboarded;\r\n\r\n    // Thêm logs để debug\r\n    console.log('Auth data:', authData);\r\n    console.log('isLoading:', isLoading);\r\n    console.log('Error:', error);\r\n    console.log('isAuthenticated:', Boolean(authData?.user));\r\n    console.log('isOnboarded:', authData?.user?.isOnboarded);\r\n\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            if (!isAuthenticated) {\r\n                router.push(\"/sign-up\");\r\n            } else if (!isOnboarded) {\r\n                router.push(\"/onboarding\");\r\n            }\r\n        }\r\n    }, [isLoading, isAuthenticated, isOnboarded, router]);\r\n\r\n    if (isLoading) return <div>Loading...</div>;\r\n    if (!isAuthenticated || !isOnboarded) return null;\r\n\r\n    return <>{children}</>;\r\n}"],"names":[],"mappings":";;;;;;;;;AAGA;AACA;AACA;;;AALA;;;;;AAWe,SAAS,UAAU,EAAE,QAAQ,EAAkB;;IAC1D,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,EAAE,MAAM,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,SAAS;QAClD,UAAU;YAAC;SAAW;QACtB,OAAO;kCAAE;gBACL,MAAM,MAAM,MAAM,wHAAA,CAAA,gBAAa,CAAC,GAAG,CAAC;gBACpC,OAAO,IAAI,IAAI;YACnB;;QACA,OAAO;IACX;IAEA,MAAM,WAAW,UAAU;IAC3B,MAAM,kBAAkB,QAAQ;IAChC,MAAM,cAAc,UAAU;IAE9B,qBAAqB;IACrB,QAAQ,GAAG,CAAC,cAAc;IAC1B,QAAQ,GAAG,CAAC,cAAc;IAC1B,QAAQ,GAAG,CAAC,UAAU;IACtB,QAAQ,GAAG,CAAC,oBAAoB,QAAQ,UAAU;IAClD,QAAQ,GAAG,CAAC,gBAAgB,UAAU,MAAM;IAE5C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACN,IAAI,CAAC,WAAW;gBACZ,IAAI,CAAC,iBAAiB;oBAClB,OAAO,IAAI,CAAC;gBAChB,OAAO,IAAI,CAAC,aAAa;oBACrB,OAAO,IAAI,CAAC;gBAChB;YACJ;QACJ;8BAAG;QAAC;QAAW;QAAiB;QAAa;KAAO;IAEpD,IAAI,WAAW,qBAAO,6LAAC;kBAAI;;;;;;IAC3B,IAAI,CAAC,mBAAmB,CAAC,aAAa,OAAO;IAE7C,qBAAO;kBAAG;;AACd;GArCwB;;QACL,qIAAA,CAAA,YAAS;QAEqB;;;KAHzB","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tranh/OneDrive%20-%20Seneca/Documents/VSCODE/project/Streaming_Platform/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}