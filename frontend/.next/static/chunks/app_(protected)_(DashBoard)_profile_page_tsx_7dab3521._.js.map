{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruce%20Vo/Documents/project/linguex/Streaming_Platform/frontend/app/%28protected%29/%28DashBoard%29/profile/page.tsx"],"sourcesContent":["// components/ProfileDropdown.tsx\r\n\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { \r\n    UserIcon, \r\n    SettingsIcon, \r\n    LogOutIcon,\r\n    ChevronDownIcon,\r\n    UserCircleIcon,\r\n    BellIcon\r\n} from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { signOut } from \"next-auth/react\";\r\n\r\nexport default function ProfileDropdown() {\r\n    const { user, logout } = useAuth();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const router = useRouter();\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        setIsOpen(false);\r\n        await logout();\r\n        // Nếu dùng NextAuth\r\n        await signOut({ redirect: false });\r\n        router.push(\"/login\");\r\n    };\r\n\r\n    if (!user) return null;\r\n\r\n    // Get display name and email\r\n    const displayName = user.fullName || user.email?.split('@')[0] || 'User';\r\n    const userEmail = user.email;\r\n    const avatarLetter = displayName[0]?.toUpperCase() || 'U';\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            {/* Avatar Button */}\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"flex items-center gap-2 p-1 rounded-full hover:bg-base-200 transition-colors\"\r\n                aria-label=\"User menu\"\r\n            >\r\n                <div className=\"avatar\">\r\n                    <div className=\"w-10 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2\">\r\n                        {user.profilePic ? (\r\n                            <Image\r\n                                src={user.profilePic}\r\n                                alt={displayName}\r\n                                width={40}\r\n                                height={40}\r\n                                className=\"object-cover\"\r\n                            />\r\n                        ) : (\r\n                            <div className=\"bg-primary text-primary-content flex items-center justify-center w-full h-full\">\r\n                                <span className=\"text-lg font-semibold\">\r\n                                    {avatarLetter}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <ChevronDownIcon className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`} />\r\n            </button>\r\n\r\n            {/* Dropdown Menu */}\r\n            {isOpen && (\r\n                <div className=\"absolute right-0 mt-2 w-64 bg-base-100 rounded-lg shadow-lg border border-base-300 z-50 dropdown-menu\">\r\n                    {/* User Info Header */}\r\n                    <div className=\"p-4 border-b border-base-300\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"avatar\">\r\n                                <div className=\"w-12 rounded-full\">\r\n                                    {user.profilePic ? (\r\n                                        <Image\r\n                                            src={user.profilePic}\r\n                                            alt={displayName}\r\n                                            width={48}\r\n                                            height={48}\r\n                                            className=\"object-cover\"\r\n                                        />\r\n                                    ) : (\r\n                                        <div className=\"bg-primary text-primary-content flex items-center justify-center w-full h-full\">\r\n                                            <span className=\"text-xl font-semibold\">\r\n                                                {avatarLetter}\r\n                                            </span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <p className=\"font-semibold truncate\">{displayName}</p>\r\n                                <p className=\"text-sm text-gray-500 truncate\">{userEmail}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Menu Items */}\r\n                    <div className=\"py-2\">\r\n                        <Link href=\"/profile\" onClick={() => setIsOpen(false)}>\r\n                            <div className=\"flex items-center gap-3 px-4 py-2 hover:bg-base-200 cursor-pointer transition-colors\">\r\n                                <UserCircleIcon className=\"w-5 h-5\" />\r\n                                <span>My Profile</span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        <Link href=\"/friends\" onClick={() => setIsOpen(false)}>\r\n                            <div className=\"flex items-center gap-3 px-4 py-2 hover:bg-base-200 cursor-pointer transition-colors\">\r\n                                <UserIcon className=\"w-5 h-5\" />\r\n                                <span>Friends</span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        <Link href=\"/notifications\" onClick={() => setIsOpen(false)}>\r\n                            <div className=\"flex items-center gap-3 px-4 py-2 hover:bg-base-200 cursor-pointer transition-colors\">\r\n                                <BellIcon className=\"w-5 h-5\" />\r\n                                <span>Notifications</span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        <Link href=\"/settings\" onClick={() => setIsOpen(false)}>\r\n                            <div className=\"flex items-center gap-3 px-4 py-2 hover:bg-base-200 cursor-pointer transition-colors\">\r\n                                <SettingsIcon className=\"w-5 h-5\" />\r\n                                <span>Settings</span>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        <div className=\"border-t border-base-300 my-2\"></div>\r\n\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"flex items-center gap-3 px-4 py-2 hover:bg-base-200 cursor-pointer transition-colors w-full text-left text-error\"\r\n                        >\r\n                            <LogOutIcon className=\"w-5 h-5\" />\r\n                            <span>Logout</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}