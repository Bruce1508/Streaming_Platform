{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruce%20Vo/Documents/project/linguex/Streaming_Platform/frontend/app/%28auth%29/sign-in/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { ShipWheelIcon } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport toast from \"react-hot-toast\";\r\nimport { signIn } from \"next-auth/react\";\r\n\r\nconst LoginPage = () => {\r\n    const router = useRouter();\r\n\r\n    const [loginData, setLoginData] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const [isPending, setIsPending] = useState(false);\r\n    const [oauthLoading, setOauthLoading] = useState<string | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const hasGoogleAuth = process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID;\r\n\r\n    const handleGoogleSignIn = async () => {\r\n        setOauthLoading('google');\r\n        try {\r\n            await signIn(\"google\", { callbackUrl: \"/\" });\r\n        } catch (error: any) {\r\n            toast.error(\"Đăng nhập với Google thất bại.\");\r\n            setOauthLoading(null);\r\n        }\r\n    };\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsPending(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await signIn('credentials', {\r\n                redirect: false,\r\n                email: loginData.email,\r\n                password: loginData.password,\r\n            });\r\n\r\n            if (result?.ok) {\r\n                toast.success(\"Chào mừng bạn đã quay trở lại!\");\r\n                router.push(\"/\");\r\n                router.refresh();\r\n            } else {\r\n                setError(result?.error || \"Email hoặc mật khẩu không hợp lệ.\");\r\n                toast.error(result?.error || \"Đăng nhập thất bại.\");\r\n            }\r\n        } catch (err: any) {\r\n            setError(\"Đã có lỗi xảy ra. Vui lòng thử lại.\");\r\n            toast.error(\"Đã có lỗi xảy ra. Vui lòng thử lại.\");\r\n        } finally {\r\n            setIsPending(false);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setLoginData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center p-4\" data-theme=\"dark\">\r\n            <div className=\"border border-primary/25 flex flex-col lg:flex-row w-full max-w-5xl mx-auto bg-base-100 rounded-xl shadow-2xl overflow-hidden\">\r\n                <div className=\"w-full lg:w-1/2 p-6 sm:p-10 flex flex-col\">\r\n                    <div className=\"mb-8 flex items-center justify-start gap-2\">\r\n                        <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n                            <ShipWheelIcon className=\"size-8 text-primary\" />\r\n                        </div>\r\n                        <span className=\"text-3xl font-bold font-mono bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary tracking-wider\">\r\n                            StudyBuddy\r\n                        </span>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"alert alert-error mb-4\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                            <span>{error}</span>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"w-full space-y-6\">\r\n                        <div>\r\n                            <h2 className=\"text-3xl font-bold\">Welcome Back</h2>\r\n                            <p className=\"text-base opacity-70 mt-2\">\r\n                                Sign in to access your study materials\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            {hasGoogleAuth && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleGoogleSignIn}\r\n                                    disabled={oauthLoading === 'google' || isPending}\r\n                                    className=\"btn btn-outline w-full gap-3 h-12 hover:bg-base-200\"\r\n                                >\r\n                                    {oauthLoading === 'google' ? (\r\n                                        <span className=\"loading loading-spinner loading-sm\"></span>\r\n                                    ) : (\r\n                                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\r\n                                            <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n                                            <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n                                            <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n                                            <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n                                        </svg>\r\n                                    )}\r\n                                    <span className=\"font-medium\">Continue with Google</span>\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        {hasGoogleAuth && (\r\n                            <div className=\"divider text-sm\">OR CONTINUE WITH EMAIL</div>\r\n                        )}\r\n\r\n                        <form onSubmit={handleLogin} className=\"space-y-4\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"form-control w-full\">\r\n                                    <label className=\"label\">\r\n                                        <span className=\"label-text font-medium\">Email</span>\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        placeholder=\"student@myseneca.ca\"\r\n                                        className=\"input input-bordered w-full\"\r\n                                        value={loginData.email}\r\n                                        onChange={handleInputChange}\r\n                                        required\r\n                                        disabled={isPending || !!oauthLoading}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"form-control w-full\">\r\n                                    <label className=\"label\">\r\n                                        <span className=\"label-text font-medium\">Password</span>\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        name=\"password\"\r\n                                        placeholder=\"••••••••\"\r\n                                        className=\"input input-bordered w-full\"\r\n                                        value={loginData.password}\r\n                                        onChange={handleInputChange}\r\n                                        required\r\n                                        disabled={isPending || !!oauthLoading}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between mt-2\">\r\n                                <Link\r\n                                    href=\"/forgot-password\"\r\n                                    className=\"text-sm text-primary hover:underline\"\r\n                                >\r\n                                    Forgot password?\r\n                                </Link>\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isPending || !!oauthLoading}\r\n                                className=\"btn btn-primary w-full mt-6\"\r\n                            >\r\n                                {isPending ? (\r\n                                    <span className=\"loading loading-spinner\"></span>\r\n                                ) : \"Sign In\"}\r\n                            </button>\r\n                        </form>\r\n                        <p className=\"text-center text-sm mt-4\">\r\n                            Don&apos;t have an account?{\" \"}\r\n                            <Link href=\"/sign-up\" className=\"text-primary hover:underline font-medium\">\r\n                                Sign up\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"hidden lg:flex w-1/2 bg-gradient-to-br from-primary/5 to-secondary/5 items-center justify-center p-12\">\r\n                    <Image\r\n                        src=\"/globe.svg\" \r\n                        alt=\"StudyBuddy Branding\"\r\n                        width={400}\r\n                        height={400}\r\n                        className=\"object-contain\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;"],"names":[],"mappings":"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","debugId":null}}]
}