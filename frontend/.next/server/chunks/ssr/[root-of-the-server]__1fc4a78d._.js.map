{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Documents/code/streamify/Streaming_Platform/frontend/lib/axios.ts"],"sourcesContent":["// lib/axiosInstance.ts\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5001/api\";\r\n\r\nexport const axiosInstance = axios.create({\r\n  baseURL: BASE_URL,  // Đây là URL của backend của bạn\r\n  withCredentials: true,  // Cho phép gửi cookies (cần thiết cho authentication)\r\n});\r\n\r\naxiosInstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // Xử lý lỗi globally, ví dụ: refresh token, redirect to login, v.v.\r\n    return Promise.reject(error);\r\n  }\r\n);"],"names":[],"mappings":"AAAA,uBAAuB;;;;AACvB;;AAEA,MAAM,WAAW,iEAAmC;AAE7C,MAAM,gBAAgB,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACxC,SAAS;IACT,iBAAiB;AACnB;AAEA,cAAc,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrC,CAAC,WAAa,UACd,CAAC;IACC,oEAAoE;IACpE,OAAO,QAAQ,MAAM,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Documents/code/streamify/Streaming_Platform/frontend/components/ui/PageLoader.tsx"],"sourcesContent":["import { LoaderIcon } from \"lucide-react\";\r\n\r\nconst PageLoader = () => {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n            <LoaderIcon className=\"animate-spin size-10 text-primary\" />\r\n        </div>\r\n    );\r\n};\r\nexport default PageLoader;"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,aAAa;IACf,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC,0MAAA,CAAA,aAAU;YAAC,WAAU;;;;;;;;;;;AAGlC;uCACe","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Documents/code/streamify/Streaming_Platform/frontend/components/AuthGuard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { axiosInstance } from \"@/lib/axios\";\r\nimport { useEffect, ReactNode } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport PageLoader from \"./ui/PageLoader\";\r\n\r\ninterface AuthGuardProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport default function AuthGuard({ children }: AuthGuardProps) {\r\n    const router = useRouter();\r\n\r\n    const { data: authData, isLoading, error } = useQuery({\r\n        queryKey: [\"authUser\"],\r\n        queryFn: async () => {\r\n            const res = await axiosInstance.get(\"/auth/me\");\r\n            return res.data;\r\n        },\r\n        retry: false,\r\n    });\r\n\r\n    const authUser = authData?.user;\r\n    const isAuthenticated = Boolean(authUser);\r\n    const isOnboarded = authUser?.isOnboarded;\r\n\r\n    // Thêm logs để debug\r\n    console.log('Auth data:', authData);\r\n    console.log('isLoading:', isLoading);\r\n    console.log('Error:', error);\r\n    console.log('isAuthenticated:', Boolean(authData?.user));\r\n    console.log('isOnboarded:', authData?.user?.isOnboarded);\r\n\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            if (!isAuthenticated) {\r\n                router.push(\"/sign-up\");\r\n            } else if (!isOnboarded) {\r\n                router.push(\"/onboarding\");\r\n            }\r\n        }\r\n    }, [isLoading, isAuthenticated, isOnboarded, router]);\r\n\r\n    if (isLoading) return <PageLoader/>;\r\n    if (!isAuthenticated || !isOnboarded) return null;\r\n\r\n    return <>{children}</>;\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAYe,SAAS,UAAU,EAAE,QAAQ,EAAkB;IAC1D,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,EAAE,MAAM,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;QAClD,UAAU;YAAC;SAAW;QACtB,SAAS;YACL,MAAM,MAAM,MAAM,4GAAA,CAAA,gBAAa,CAAC,GAAG,CAAC;YACpC,OAAO,IAAI,IAAI;QACnB;QACA,OAAO;IACX;IAEA,MAAM,WAAW,UAAU;IAC3B,MAAM,kBAAkB,QAAQ;IAChC,MAAM,cAAc,UAAU;IAE9B,qBAAqB;IACrB,QAAQ,GAAG,CAAC,cAAc;IAC1B,QAAQ,GAAG,CAAC,cAAc;IAC1B,QAAQ,GAAG,CAAC,UAAU;IACtB,QAAQ,GAAG,CAAC,oBAAoB,QAAQ,UAAU;IAClD,QAAQ,GAAG,CAAC,gBAAgB,UAAU,MAAM;IAE5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI,CAAC,WAAW;YACZ,IAAI,CAAC,iBAAiB;gBAClB,OAAO,IAAI,CAAC;YAChB,OAAO,IAAI,CAAC,aAAa;gBACrB,OAAO,IAAI,CAAC;YAChB;QACJ;IACJ,GAAG;QAAC;QAAW;QAAiB;QAAa;KAAO;IAEpD,IAAI,WAAW,qBAAO,8OAAC,+HAAA,CAAA,UAAU;;;;;IACjC,IAAI,CAAC,mBAAmB,CAAC,aAAa,OAAO;IAE7C,qBAAO;kBAAG;;AACd","debugId":null}}]
}