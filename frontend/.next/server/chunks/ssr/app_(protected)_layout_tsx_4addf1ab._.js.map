{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruce%20Vo/Documents/project/linguex/Streaming_Platform/frontend/app/%28protected%29/layout.tsx"],"sourcesContent":["// app/(protected)/layout.tsx\r\nexport default function ProtectedLayout({ children }: { children: ReactNode }) {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const { user, isLoading: authLoading } = useAuth();\r\n    const { status: sessionStatus } = useSession();\r\n\r\n    const isLoading = authLoading || sessionStatus === 'loading';\r\n\r\n    console.log('üè† Protected Layout:', {\r\n        user: user?._id,\r\n        isLoading,\r\n        authLoading,\r\n        sessionStatus,\r\n        pathname\r\n    });\r\n\r\n    useEffect(() => {\r\n        // QUAN TR·ªåNG: Ph·∫£i check isLoading tr∆∞·ªõc\r\n        if (isLoading) {\r\n            console.log(\"‚è≥ Auth still loading...\");\r\n            return;\r\n        }\r\n\r\n        // N·∫øu kh√¥ng c√≥ user V√Ä kh√¥ng ph·∫£i ƒëang loading\r\n        if (!user && !isLoading) {\r\n            console.log('‚ùå No user, redirecting to sign-in');\r\n            router.push(\"/sign-in\"); // ‚Üê ƒê·ªïi sang sign-in thay v√¨ sign-up\r\n            return;\r\n        }\r\n\r\n        // Check onboarding\r\n        if (user && !user.isOnboarded && pathname !== \"/onBoarding\") {\r\n            console.log('üîÑ Redirecting to onboarding');\r\n            router.push(\"/onBoarding\");\r\n            return;\r\n        }\r\n    }, [isLoading, user, router, pathname]);\r\n\r\n    // Show loader while checking auth\r\n    if (isLoading) {\r\n        console.log('‚è≥ Showing loader - auth loading');\r\n        return <PageLoader />;\r\n    }\r\n\r\n    // If no user after loading complete\r\n    if (!user) {\r\n        console.log('üîÑ No user, showing loader while redirecting');\r\n        return <PageLoader />;\r\n    }\r\n\r\n    // Render children if authenticated\r\n    console.log('‚úÖ Rendering protected content');\r\n    return <>{children}</>;\r\n}"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AACd,SAAS,gBAAgB,EAAE,QAAQ,EAA2B;IACzE,MAAM,SAAS;IACf,MAAM,WAAW;IACjB,MAAM,EAAE,IAAI,EAAE,WAAW,WAAW,EAAE,GAAG;IACzC,MAAM,EAAE,QAAQ,aAAa,EAAE,GAAG;IAElC,MAAM,YAAY,eAAe,kBAAkB;IAEnD,QAAQ,GAAG,CAAC,wBAAwB;QAChC,MAAM,MAAM;QACZ;QACA;QACA;QACA;IACJ;IAEA,UAAU;QACN,yCAAyC;QACzC,IAAI,WAAW;YACX,QAAQ,GAAG,CAAC;YACZ;QACJ;QAEA,+CAA+C;QAC/C,IAAI,CAAC,QAAQ,CAAC,WAAW;YACrB,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC,aAAa,qCAAqC;YAC9D;QACJ;QAEA,mBAAmB;QACnB,IAAI,QAAQ,CAAC,KAAK,WAAW,IAAI,aAAa,eAAe;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC;YACZ;QACJ;IACJ,GAAG;QAAC;QAAW;QAAM;QAAQ;KAAS;IAEtC,kCAAkC;IAClC,IAAI,WAAW;QACX,QAAQ,GAAG,CAAC;QACZ,qBAAO,8OAAC;;;;;IACZ;IAEA,oCAAoC;IACpC,IAAI,CAAC,MAAM;QACP,QAAQ,GAAG,CAAC;QACZ,qBAAO,8OAAC;;;;;IACZ;IAEA,mCAAmC;IACnC,QAAQ,GAAG,CAAC;IACZ,qBAAO;kBAAG;;AACd","debugId":null}}]
}